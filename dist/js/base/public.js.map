{"version":3,"sources":["base/public.js"],"names":["jumptopage","url","location","href","substitute","str","o","regexp","replace","match","name","undefined","drawSpie","num","hcolor","bcolor","mark_code","code","mcode","split","ck_null","data","getNow","time","_now","Date","setTime","getTime","getApp","_sendUrl","window","Helper","isIOS","isApp","webkit","messageHandlers","getFundPosts","postMessage","isAndroid","$","fadeIn","css","hide","html","h5toApp","_from","callbackHandler","uid","getQuery","tok","userid","console","log","token_exp","tag_colors","no_data_text","mess_info","timeout","follow","unfollow","no_fund","append","fundCore","opt","defaultopt","iScroll","nodatatext","pulldowntext","pulluptext","leavetext","onloadtext","extend","this","dataLoading","appendTo","on","e","stopPropagation","preventDefault","Timeout","noData","noCust_data","dataEnd","remove","setAjax","_userid","_pkey","ajaxSetup","global","headers","pkey","beforeSend","XMLHttpRequest","bind","error","textStatus","errorThrown","text","delay","fadeOut","complete","Ajax","_url","_type","_data","_callback","_loading","_user","_filter","option","type","dataType","cache","dataFilter","replaceAll","ajax","done","initIscroll","$wrapper","$pulldown","$pullup","_downData","_upData","myScroll","pullDownEl","pullDownOffset","pullUpEl","pullUpOffset","document","getElementById","offsetHeight","useTransition","topOffset","onRefresh","className","querySelector","innerHTML","onScrollMove","y","show","minScrollY","maxScrollY","onScrollEnd","disable","empty","parent","enable","setTimeout","style","left","FootTool","button","hasClass","init","_getQuery","saveQueryString","getQueryString","from","prototype","changIsState","is","message","result","length","trigger","total","saveData","value","JSON","stringify","localStorage","setItem","setCookie","getData","parse","getItem","getCookie","delData","removeItem","delCookie","_obj","fundurl","industry","change","changelist","fundfilter","funddetail","labelindustry","invtyp","labeltheme","labelstyle","netvaluelist","stocklist","orgdetail","rankings","managerdetail","orgfunds","banner","recoms","stockdt","news","index","weekindustry","weekconsept","realtime","estimate","manager","companySearch","companyProfile","companyStock","companyDetail","companyCate","companyFunds","managerList","managerDetail","managerRankings","fundFetch","fundtrend","funddaily","fundindustry","fundasset","fundmanager","estimatedaily","fundsummary","fundar7d","dividend","weeklylist","diagnose","stocksAndBonds","weekly","newsfetch","spstyle","laberisk","infourl","newslist","userurl","usfundlist","collect","check","removeClass","children","String","s1","s2","RegExp"],"mappings":"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","file":"base/public.js","sourcesContent":["var uid = Helper.getQuery('uid');\r\nvar tok = Helper.getQuery('tok');\r\nvar _from;\r\nvar userid;\r\nconsole.log('public')\r\nHelper.getQuery('userid') != 'null' ? userid = Helper.getQuery('userid') : userid = '';\r\nvar token_exp = 60 * 60 * 2; // 2小时\r\n\r\n//标签色组\r\nvar tag_colors = ['#faa226', '#13b5b1', '#00b7ee', '#00b7ee', '#f3737c', '#8978c9', '#94b0bc', '#bb6868'];\r\n\r\n//信息提示\r\nvar no_data_text = '';\r\nvar mess_info = {\r\n    timeout: '请求超时,请稍后再试。',\r\n    follow: '收藏成功',\r\n    unfollow: '取消收藏',\r\n    no_fund: '暂无该基金信息'\r\n};\r\n$(\"body\").append(\"<div id='star_pop'><div></div></div>\");\r\n\r\n\r\nvar fundCore = function(opt) {\r\n    var defaultopt = {\r\n        iScroll: {\r\n            //nodatatext: \"数据已经加载完毕\",//全局数据的文字\r\n            nodatatext: \"\",//全局数据的文字\r\n            pulldowntext: \"下拉刷新\",\r\n            pulluptext: \"加载更多\",\r\n            leavetext: \"释放刷新\",\r\n            onloadtext: \"加载中\"\r\n        }\r\n        //设置一些初始默认属性\r\n    }\r\n    defaultopt = $.extend(defaultopt, opt);\r\n    this.dataLoading = function() { //加载数据载入状态\r\n        $('<div class=\"fund_loadingmodal\"><div class=\"fund_newloading\"></div></div>').appendTo('body');\r\n        $('.fund_loadingmodal').on(\"click\", function(e) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n        })\r\n    }\r\n    this.Timeout = false;\r\n    this.noData = function() {\r\n        $('<div class=\"fund_nodatamodal\"><div class=\"fund_loading\"><div class=\"fund_loadingnoimg\">暂无数据,请选择其他条件</div></div></div>').appendTo('body');\r\n    }\r\n    this.noCust_data = function() {\r\n        $('<div class=\"fund_nodatamodal\"><div class=\"fund_loading\"><div class=\"fund_loadingnoimg\">你还没有收藏任何基金</div></div></div>').appendTo('body');\r\n    }\r\n    this.dataEnd = function() { //关闭载入状态\r\n        $('.fund_loadingmodal').remove();\r\n        $('.fund_nodatamodal').remove();\r\n    }\r\n    this.setAjax = function(_userid, _pkey) { //全局ajax设置\r\n        var _this = this;\r\n        return $.ajaxSetup({\r\n            global: true,\r\n            headers: {\r\n                // source:'JD',\r\n                userid: _userid || null, //_this.getQueryString().userid\r\n                pkey: _pkey || null //_this.getQueryString().pkey\r\n            },\r\n            timeout: 10000, //十秒超时设置\r\n            beforeSend: function(XMLHttpRequest) {\r\n                this.dataLoading();\r\n            }.bind(this),\r\n            error: function(XMLHttpRequest, textStatus, errorThrown) {\r\n                console.log(textStatus)\r\n                if (textStatus === \"timeout\" && !this.Timeout) {\r\n                    this.Timeout = true;\r\n                    $(\"#star_pop div\").text(mess_info.timeout);\r\n                    $(\"#star_pop\").fadeIn().delay(3000).fadeOut();\r\n                    this.Timeout = false;\r\n                }\r\n                $(\"body\").fadeIn();\r\n            }.bind(this),\r\n            complete: function(XMLHttpRequest, textStatus) {\r\n                this.dataEnd();\r\n            }.bind(this)\r\n        });\r\n    }\r\n    this.Ajax = function(_url, _type, _data, _callback, _loading, _user, _filter) { //简单封装AJAX调用\r\n            var option = {\r\n                url: '/fund/api' + _url,\r\n                type: _type,\r\n                dataType: 'json',\r\n                data: _data,\r\n                cache: false,\r\n                dataFilter: function(data, type) {\r\n                    if (_filter) {\r\n                        data = data.replaceAll(null, \"\\\"--\\\"\");\r\n                        return data;\r\n                    } else {\r\n                        return data;\r\n                    }\r\n                }\r\n            }\r\n            if (_user) {\r\n                $.extend(option, {\r\n                    url: '/userservice' + _url\r\n                });\r\n            }\r\n            if (_loading) { //是否使用默认加载遮罩\r\n                $.extend(option, {\r\n                    beforeSend: function() {}\r\n                });\r\n            }\r\n            return $.ajax(option)\r\n                .done(function(data) {\r\n                    switch (data.code) {\r\n                        case \"200\":\r\n                            _callback(data);\r\n                            break\r\n                        case \"400\":\r\n                            console.log('参数异常');\r\n                            break\r\n                        case \"500\":\r\n                            console.log('服务异常');\r\n                            break\r\n                        case \"10200\":\r\n                            $(\"body\").fadeIn();\r\n                            $(\"#wrapper\").css('left', '0');\r\n                            $(\"#pullDown,#pullUp\").hide();\r\n                            $(\"#thelist\").html(\"<div style='text-align:center;padding:10px;'>当前操作异常，请重新登录</div>\");\r\n                            console.log('accessKey值不匹配');\r\n                            break\r\n                        case \"10107\":\r\n                            console.log('程序异常');\r\n                            break\r\n                        default:\r\n                            break;\r\n                    }\r\n                })\r\n        },\r\n        this.initIscroll = function($wrapper, $pulldown, $pullup, _downData, _upData) {\r\n            var myScroll, pullDownEl, pullDownOffset, pullUpEl, pullUpOffset;\r\n            pullDownEl = document.getElementById($pulldown);\r\n            pullDownOffset = pullDownEl.offsetHeight;\r\n            pullUpEl = document.getElementById($pullup);\r\n            pullUpOffset = pullUpEl.offsetHeight;\r\n            myScroll = new iScroll($wrapper, {\r\n                useTransition: true,\r\n                topOffset: pullDownOffset,\r\n                onRefresh: function() {\r\n                    if (pullDownEl.className.match('loading')) {\r\n                        pullDownEl.className = '';\r\n                        pullDownEl.querySelector('.pullDownLabel').innerHTML = defaultopt.iScroll.pulldowntext;\r\n                    } else if (pullUpEl.className.match('loading')) {\r\n                        pullUpEl.className = '';\r\n                        pullUpEl.querySelector('.pullUpLabel').innerHTML = defaultopt.iScroll.pulluptext;\r\n                    }\r\n                },\r\n                onScrollMove: function() {\r\n                    if (this.y > 5 && !pullDownEl.className.match('flip')) {\r\n                        pullDownEl.className = 'flip';\r\n                        $('.pullUpIcon').show()\r\n                        pullDownEl.querySelector('.pullDownLabel').innerHTML = defaultopt.iScroll.leavetext;\r\n                        this.minScrollY = 0;\r\n                    } else if (this.y < 5 && pullDownEl.className.match('flip')) {\r\n                        pullDownEl.className = '';\r\n                        pullDownEl.querySelector('.pullDownLabel').innerHTML = defaultopt.iScroll.pulldowntext;\r\n                        this.minScrollY = -pullDownOffset;\r\n                    } else if (this.y < (this.maxScrollY - 5) && !pullUpEl.className.match('flip')) {\r\n                        if (!pullUpEl.querySelector('.pullUpLabel')) {\r\n                            return;\r\n                        }\r\n                        pullUpEl.className = 'flip';\r\n                        $('.pullUpIcon').show();\r\n                        pullUpEl.querySelector('.pullUpLabel').innerHTML = defaultopt.iScroll.leavetext;\r\n                        this.maxScrollY = this.maxScrollY;\r\n                    } else if (this.y > (this.maxScrollY + 5) && pullUpEl.className.match('flip')) {\r\n                        if (!pullUpEl.querySelector('.pullUpLabel')) {\r\n                            return;\r\n                        }\r\n                        pullUpEl.className = '';\r\n                        pullUpEl.querySelector('.pullUpLabel').innerHTML = defaultopt.iScroll.pulluptext;\r\n                        this.maxScrollY = pullUpOffset;\r\n                    }\r\n                },\r\n                onScrollEnd: function() {\r\n                    if (pullDownEl.className.match('flip')) {\r\n                        pullDownEl.className = 'loading';\r\n                        pullDownEl.querySelector('.pullDownLabel').innerHTML = defaultopt.iScroll.onloadtext;\r\n                        _downData(myScroll);\r\n                    } else if (pullUpEl.className.match('flip')) {\r\n                        pullUpEl.className = 'loading';\r\n                        pullUpEl.querySelector('.pullUpLabel').innerHTML = defaultopt.iScroll.onloadtext;\r\n                        _upData(myScroll);\r\n                    }\r\n                }\r\n            });\r\n            $(myScroll).on('empty', function() {\r\n                myScroll.disable();\r\n                $('#pullUp').empty().append('<div class=\"isnodata\">' + defaultopt.iScroll.nodatatext + '</div>');\r\n            });\r\n            $(myScroll).on('inten', function() {\r\n                $('#pullUp').empty().append('<div class=\"isnodata\">' + defaultopt.iScroll.nodatatext + '</div>')\r\n                $('#pullUp').parent().append('<div style=\"height:4rem\"></div>');\r\n                myScroll.enable();\r\n            });\r\n            $(myScroll).on('normal', function() {\r\n                $('#pullUp').empty().append('<div class=\"iscontent\"><span class=\"pullUpIcon\"></span><span class=\"pullUpLabel\">' + defaultopt.iScroll.pulluptext + '</span></div>');\r\n                myScroll.enable();\r\n            });\r\n            setTimeout(function() {\r\n                document.getElementById($wrapper).style.left = '0';\r\n            }, 50);\r\n            return myScroll\r\n        },\r\n        this.FootTool = function() { // 初始化菜单切换\r\n            var button = $('#footer i');\r\n            $('<script src=\"http://s4.cnzz.com/z_stat.php?id=1259536245&web_id=1259536245\" language=\"JavaScript\"></script>').appendTo('head');\r\n            button.on('click', function() {\r\n                if (!$(this).hasClass('fin')) {\r\n                    jumptopage($(this).data('url'));\r\n                }\r\n                // else {//测评这个版本先不做\r\n                //     if (ckeck_tok()) {\r\n                //         $.ajax({\r\n                //             url: '/userservice/fund/asset/info?uid=' + uid + '&token=' + Helper.getCookie('fund_token'),\r\n                //             type: 'GET',\r\n                //             beforeSend: function(request) {\r\n                //                 request.setRequestHeader(\"userid\", userid);\r\n                //                 request.setRequestHeader(\"pkey\", uid);\r\n                //             },\r\n                //             success: function(data) {\r\n                //                 var _data = data.message;\r\n                //                 if (_data.total != '' && _data.total > 0) {\r\n                //                     location.href = '/static/fin/index.html?uid=' + uid + '&userid=' + userid + '&from=' + _from;\r\n                //                 } else {\r\n                //                     location.href = '/static/fin/ques.html?uid=' + uid + '&userid=' + userid + '&from=' + _from;\r\n                //                 }\r\n                //             }\r\n                //         })\r\n                //     } else {\r\n                //         getApp();\r\n                //     }\r\n                // }\r\n            })\r\n        }\r\n    this.init = function(_getQuery) { //初始化全局设置\r\n        if (_getQuery) {\r\n            this.saveQueryString() //存储APP传来的参数\r\n        }\r\n        if (this.getQueryString()) {\r\n            // document.write(JSON.stringify(this.getQueryString()))\r\n            this.setAjax(this.getQueryString().userid, this.getQueryString().pkey);\r\n            _from = this.getQueryString().from;\r\n        }\r\n        this.FootTool();\r\n    }\r\n    if (opt) {\r\n        this.init(opt.getQuery);\r\n    } else {\r\n        this.init();\r\n    }\r\n}\r\nfundCore.prototype = {\r\n    changIsState: function(is, data) {\r\n        if (data.message.result.length === 0 || data.message.result === '--' || data.message === '--') {\r\n            $(is).trigger('empty');\r\n        } else if (data.message.result.length < 20) {\r\n            $(is).trigger('inten');\r\n        } else if (data.message.result.length === 20 && data.message.total === 20) {\r\n            $(is).trigger('inten');\r\n        } else {\r\n            $(is).trigger('normal');\r\n        }\r\n    },\r\n    saveData: function(name, value) {\r\n        if ('JSON' in window) {\r\n            value = JSON.stringify(value);\r\n        }\r\n        if (Helper.isIOS()) {\r\n            return window.localStorage.setItem(name, value);\r\n        }\r\n        if (Helper.isAndroid()) {\r\n            return Helper.setCookie(name, value);\r\n        }\r\n        return window.localStorage.setItem(name, value);\r\n    },\r\n    getData: function(name) {\r\n        if (Helper.isIOS()) {\r\n            return JSON.parse(window.localStorage.getItem(name));\r\n        }\r\n        if (Helper.isAndroid()) {\r\n            return JSON.parse(Helper.getCookie(name));\r\n        }\r\n        return JSON.parse(window.localStorage.getItem(name));\r\n\r\n    },\r\n    delData: function(name) {\r\n        if (Helper.isIOS()) {\r\n            return window.localStorage.removeItem(name);\r\n        }\r\n        if (Helper.isAndroid()) {\r\n            return Helper.delCookie(name);\r\n        }\r\n        return window.localStorage.removeItem(name);\r\n    },\r\n    saveQueryString: function() {\r\n        var _obj = {};\r\n        if (!Helper.getQuery('uid')) {\r\n            return;\r\n        }\r\n        Helper.getQuery('uid') && (_obj.pkey = Helper.getQuery('uid'));\r\n        Helper.getQuery('tok') && (_obj.tok = Helper.getQuery('tok'));\r\n        Helper.getQuery('userid') && (_obj.userid = Helper.getQuery('userid'));\r\n        Helper.getQuery('from') && (_obj.from = Helper.getQuery('from'));\r\n        this.saveData('queryString', _obj);\r\n    },\r\n    getQueryString: function() {\r\n        return this.getData('queryString');\r\n    },\r\n    fundurl: {\r\n        'industry': '/change/industry/ranking', //行业涨幅\r\n        'change': '/change/ranking', //基金涨幅\r\n        'changelist': '/change/industry/list', //行业内基金涨跌幅\r\n        'fundfilter': '/filter', //基金筛选\r\n        'funddetail': '/detail', //基金详情\r\n        'labelindustry': '/label/industry', //行业标签列表\r\n        'invtyp': '/label/csftyp', //基金分类标签列表\r\n        'labeltheme': '/label/theme', //行业主题列表\r\n        'labelstyle': '/label/style', //行业风格列表\r\n        'netvaluelist': '/netvalue/list', //基金净值列表\r\n        'stocklist': '/stock/list', //重仓持股\r\n        'orgdetail': '/org/detail', //基金公司\r\n        'rankings': '/rankings',\r\n        'managerdetail': '/manager/detail', //基金经理\r\n        'orgfunds': '/org/funds',\r\n        'banner': '/index/banner', //banner\r\n        'recoms': '/index/recoms', //基金推荐\r\n        'stockdt': '/recoms/stock/detail', //按股价推荐详情\r\n        'news': '/recoms/news/detail', //按新闻推荐详情\r\n        'index': '/recoms/indicator/detail', //按指标推荐详情\r\n        'weekindustry': '/change/weekly/industry/list', //一周领涨板块\r\n        'weekconsept': '/change/weekly/concept/list', //一周领涨概念\r\n        'realtime': '/index/realtime/quotes', //指数事实数据\r\n        'estimate': '/net/estimate/rankings', //估值排行\r\n\r\n        'manager': '/recoms/manager', //推荐基金经理\r\n        'companySearch': '/search/org', //按字母索引基金公司\r\n        'companyProfile': '/org/profile', //公司档案基本情况\r\n        'companyStock': '/org/stock', //公司档案公司持仓\r\n        'companyDetail': '/org/detail', //基金公司详情\r\n        'companyCate': '/org/funds/cate', //基金公司基金类型分类\r\n        'companyFunds': '/org/funds', //基金公司基金\r\n        'managerList': '/manager/list', //基金公司基金经理列表\r\n        'managerDetail': '/manager/detail', //基金公司基金经理详情\r\n        'managerRankings': '/rankings', //基金经理排行榜\r\n        'fundFetch': '/announce/fetch', //基金公告\r\n        'fundtrend': '/change/trend', //基金收益走势\r\n        'funddaily': '/change/daily', //业绩表现 。。基金每日收益对比\r\n        'fundindustry': '/asset/industry', //基金详情 行业分布\r\n        'fundasset': '/asset', //基金详情　　配置类型\r\n        'fundmanager': '/fund/manager', // 基金详情 基金经理\r\n        'estimatedaily': '/net/estimate/daily', //实时估值\r\n        'fundsummary': '/summary', //基金基本详情\r\n        'fundar7d': '/change/trend/ar7d', //七日年化\r\n\r\n        'dividend': '/history/dividend',\r\n\r\n        'weeklylist': '/index/weekly/list', //领涨概念OR板块列表\r\n        'realtime': '/index/realtime/quotes', //指数事实数据\r\n        'diagnose': '/select/diagnose', //自选测评\r\n        'stocksAndBonds': '/select/diagnose/stocksAndBonds', //自选基金测评的重仓股债查询\r\n        'weekly': '/index/weekly', //一周领涨板块/概念 \r\n        'newsfetch': '/news/fetch', //首页资讯列表\r\n        'spstyle': '/label/spstyle', //风格标签列表\r\n        'laberisk': '/label/risk' //风险标签列表\r\n\r\n\r\n    },\r\n    infourl: {\r\n        'newslist': '/news/fetch' //资讯列表\r\n    },\r\n    userurl: {\r\n        'usfundlist': '/fund/list',\r\n        'collect': '/fund/collect',\r\n        'check': '/fund/collect/check'\r\n    }\r\n}\r\n$(document).on('click', function() { //关闭涨幅\r\n    $(\".sort_span\").removeClass('sort_on');\r\n    $(\".sort_div\").hide().children('i').show();\r\n})\r\n\r\nfunction jumptopage(url) { //\r\n    location.href = url;\r\n}\r\n\r\n/**\r\n * @param {String} str 模版字符串\r\n * @param {Object} o json data\r\n * @param {RegExp} [regexp] 匹配字符串正则\r\n */\r\nfunction substitute(str, o, regexp) {\r\n    return str.replace(regexp || /\\\\?\\{([^{}]+)\\}/g, function(match, name) {\r\n        return (o[name] === undefined) ? '' : o[name];\r\n    });\r\n}\r\n\r\n//num百分比，hcolor高亮色,bcolor未填满处颜色\r\nfunction drawSpie(num, hcolor, bcolor) {\r\n    if (num > 50) {\r\n        return \"linear-gradient(-90deg, \" + hcolor + \" 50%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0)), linear-gradient(\" + (num / 100 * 360 - 270) + \"deg, \" + hcolor + \" 50%, \" + bcolor + \" 50%, \" + bcolor + \")\";\r\n    } else {\r\n        return \"linear-gradient(90deg, \" + bcolor + \" 50%, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0)), linear-gradient(\" + (num / 100 * 360 + 90) + \"deg, \" + hcolor + \" 50%, \" + bcolor + \" 50%, \" + bcolor + \")\";\r\n    }\r\n}\r\nString.prototype.replaceAll = function(s1, s2) {　　\r\n    return this.replace(new RegExp(s1, \"gm\"), s2);　　\r\n}\r\n\r\n//格式代码\r\nfunction mark_code(code) {\r\n    var mcode = code.split('_');\r\n    return mcode[0];\r\n}\r\n\r\n//替换所有null为--\r\nfunction ck_null(data) {\r\n    if (data == null) {\r\n        return '--'\r\n    } else {\r\n        return data\r\n    }\r\n}\r\n\r\nfunction getNow(time) {\r\n    var _now = new Date();\r\n    return _now.setTime(_now.getTime() + time * 1000);\r\n}\r\n\r\n//获取app参数\r\nvar _sendUrl;\r\n\r\nfunction getApp() {\r\n    _sendUrl = window.location.href;\r\n    if (Helper.isIOS() == 'Mac OS X' && Helper.isApp() == 'ios') {\r\n        window.webkit.messageHandlers.getFundPosts.postMessage(_sendUrl);\r\n    } else if (Helper.isAndroid() == 'Android' && Helper.isApp() == 'android') {\r\n        window.webkit.getFundPosts(_sendUrl);\r\n    } else {\r\n        $(\"body\").fadeIn();\r\n        $(\"#wrapper\").css('left', '0');\r\n        $(\"#pullDown,#pullUp\").hide();\r\n        $(\"#thelist\").html(\"<div style='text-align:center;padding:10px;'>当前操作异常，请重新登录</div>\");\r\n    }\r\n}\r\n\r\n\r\n\r\n//检查token是否有效\r\n// function ckeck_tok() {\r\n//     if (!Helper.getCookie('fund_exp') || Helper.getCookie('fund_exp') < getNow(0)) {\r\n//         getApp();\r\n//         return false;\r\n//     } else {\r\n//         return true;\r\n//     }\r\n// }\r\n\r\n//判断url是否带tok\r\n// if (tok != '' && tok != null) {\r\n//     if (!Helper.getCookie('fund_exp') || Helper.getCookie('fund_exp') < getNow(0)) {\r\n//         Helper.setCookie('fund_token', tok, token_exp, '/');\r\n//         Helper.setCookie('fund_exp', getNow(token_exp), token_exp, '/');\r\n//     }\r\n// }\r\n// if (uid != '' && uid != null) {\r\n//     if (!Helper.getCookie('fund_uid') || Helper.getCookie('fund_uid') != uid) {\r\n//         Helper.setCookie('fund_uid', uid, token_exp, '/');\r\n//         Helper.setCookie('fund_token', tok, token_exp, '/');\r\n//     }\r\n// }\r\n\r\n\r\n//h5toAPP\r\nfunction h5toApp(code, name) {\r\n    if (_from == 'ios') {\r\n        webkit.messageHandlers.callbackHandler.postMessage('{\\\"code\\\":\\\"' + code + '\\\"}')\r\n    } else {\r\n        window.webkit.callbackHandler('{\\\"code\\\":\\\"' + code + '\\\",\\\"name\\\":\\\"' + name + '\\\"}')\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}