{"version":3,"sources":["base/helper.js"],"names":["window","FastClick","attach","document","body","console","log","Helper","formatCode","s","replace","getQuery","key","reg","RegExp","result","location","search","match","decodeURIComponent","isApp","this","isWeixin","navigator","userAgent","isIOS","isAndroid","loadBpop","load_bpop","debug","info","hash","alert","JSON","stringify","getRem","org_size","org_width","addEventListener","docEle","documentElement","style","display","recalc","clientWidth","fontSize","replaceStockCob","doc","each","ele","innerHTML","type","name","id","download","confirm","$","data","href","setCookie","value","time","path","strsec","Number","exp","Date","setTime","getTime","cookie","escape","toGMTString","getCookie","arr","unescape","delCookie","toString","css","height"],"mappings":"CACA,WACIA,OAAOC,WAAaA,UAAUC,OAAOC,SAASC,SAElDC,QAAQC,IAAI,UACZN,OAAOO,QAEHC,WAAY,SAASC,GACjB,MAAOA,GAAEC,QAAQ,YAAa,KAGlCC,SAAU,SAASC,GACf,GAAIC,GAAM,GAAIC,QAAOF,EAAM,uBACvBG,EAASC,SAASC,OAAOC,MAAML,EACnC,OAAOE,GAASI,mBAAmBJ,EAAO,IAAMA,GAGpDK,MAAO,WACH,MAAgC,OAAzBC,KAAKV,SAAS,SAA6C,WAAzBU,KAAKV,SAAS,SAAiD,OAAzBU,KAAKV,SAAS,SAA6C,aAAzBU,KAAKV,SAAS,SAGnIW,SAAU,WACN,MAAOC,WAAUC,UAAUN,MAAM,mBAGrCO,MAAO,WACH,MAAOF,WAAUC,UAAUN,MAAM,aAGrCQ,UAAW,WACP,MAAOH,WAAUC,UAAUN,MAAM,YAErCS,SAAU,WACN,OAAQpB,OAAOa,UAAiC,mBAAdQ,YAA6BA,YAEnEC,MAAO,SAASC,GACU,WAAlBd,SAASe,MAAmBC,MAAMC,KAAKC,UAAUJ,KAGzDK,OAAQ,SAASC,EAAUC,GACvB,GAAKlC,SAASmC,iBAAd,CAEA,GAAIC,GAASpC,SAASqC,eACtBD,GAAOE,MAAMC,QAAU,MACvB,IAAIC,GAAS,WACT,GAAIC,GAAcL,EAAOK,aAEpBA,GAAeA,GAAe,OACnCL,EAAOE,MAAMI,SAAWT,GAAYQ,EAAcP,GAAa,MAEnErC,QAAOsC,iBAAiB,qBAAuBtC,QAAS,oBAAsB,SAAU2C,GAAQ,GAChGxC,SAASmC,iBAAiB,mBAAoBK,GAAQ,GACtDJ,EAAOE,MAAMC,QAAU,UAE3BI,gBAAiB,SAASC,GACtBA,EAAIC,KAAK,SAASpC,EAAKqC,GACnBA,EAAIC,UAAYD,EAAIC,UAAUxC,QAAQ,kCAAmC,SAASQ,EAAOiC,EAAMC,EAAMC,GAEjG,MAAa,MAATF,EACO,2BAA6BE,EAAK,2BAA6BD,EAAO,OAC7D,MAATD,EACA,8BAAgCE,EAAK,2BAA6BD,EAAO,OAD7E,YAMnBE,SAAU,SAASL,GACX1C,OAAOe,YAAcf,OAAOmB,YAC5BM,MAAM,cACCuB,QAAQC,EAAEP,GAAKQ,KAAK,UAC3BzC,SAAS0C,KAAOF,EAAEP,GAAKQ,KAAK,SAIpCE,UAAW,SAASP,EAAMQ,EAAOC,EAAMC,GACnCD,EAAOA,GAAQ,KACf,IAAIE,GAAS,IAAOC,OAAOH,GACvBI,EAAM,GAAIC,KACdD,GAAIE,QAAQF,EAAIG,UAAqB,EAATL,GAE5BD,EAAe,IAARA,EAAa,GAAK,SAAWA,EACpC3D,SAASkE,OAASjB,EAAO,IAAMkB,OAAOV,GAAS,YAAcK,EAAIM,cAAgBT,GAGrFU,UAAW,SAASpB,GAChB,GAAIqB,GAAK5D,EAAM,GAAIC,QAAO,QAAUsC,EAAO,gBAC3C,QAAIqB,EAAMtE,SAASkE,OAAOnD,MAAML,IACrB6D,SAASD,EAAI,IAEb,MAGfE,UAAW,SAASvB,EAAMU,GACtB,GAAIG,GAAM,GAAIC,KACdD,GAAIE,QAAQF,EAAIG,UAAY,KAC5BN,EAAe,IAARA,EAAa,GAAK,SAAWA,EACpC3D,SAASkE,OAASjB,EAAO,aAAoBa,EAAIW,WAAad,IAKtEN,EAAE,WACEA,EAAE,QAAQqB,IAAI,aAAerB,EAAExD,QAAQ8E","file":"base/helper.js","sourcesContent":["//消除300毫秒点击延迟\r\n(function() {\r\n    window.FastClick && FastClick.attach(document.body);\r\n})();\r\nconsole.log('helper')\r\nwindow.Helper = {\r\n    // 格式化股票代码\r\n    formatCode: function(s) {\r\n        return s.replace(/_[_A-Z]+$/, '');\r\n    },\r\n    // 获取url参数\r\n    getQuery: function(key) {\r\n        var reg = new RegExp(key + '=([^&]+)(?=(?:&|$))');\r\n        var result = location.search.match(reg);\r\n        return result ? decodeURIComponent(result[1]) : result;\r\n    },\r\n    // 是否在app中浏览\r\n    isApp: function() {\r\n        return this.getQuery(\"from\") == 'app' || this.getQuery(\"from\") == 'android' || this.getQuery(\"from\") == 'ios' || this.getQuery(\"from\") == 'ishanghai';\r\n    },\r\n    // 是否在微信中浏览\r\n    isWeixin: function() {\r\n        return navigator.userAgent.match(/MicroMessenger/);\r\n    },\r\n    // 是否是苹果设备\r\n    isIOS: function() {\r\n        return navigator.userAgent.match(/Mac OS X/);\r\n    },\r\n    // 是否是安卓系统\r\n    isAndroid: function() {\r\n        return navigator.userAgent.match(/Android/);\r\n    },\r\n    loadBpop: function() {\r\n        return !Helper.isApp() && (typeof load_bpop === \"undefined\" || load_bpop);\r\n    },\r\n    debug: function(info) {\r\n        if (location.hash === \"#debug\") alert(JSON.stringify(info));\r\n    },\r\n    //计算不同设备rem根字体大小，比例1rem=10px, org_size=设计稿根字体大小,org_width=设计稿页面宽度\r\n    getRem: function(org_size, org_width) {\r\n        if (!document.addEventListener) return;\r\n\r\n        var docEle = document.documentElement;\r\n        docEle.style.display = 'none';\r\n        var recalc = function() {\r\n            var clientWidth = docEle.clientWidth;\r\n            //pc端大于等于1280时屏蔽，防止字体过大\r\n            if (!clientWidth || clientWidth >= 1280) return;\r\n            docEle.style.fontSize = org_size * (clientWidth / org_width) + 'px';\r\n        };\r\n        window.addEventListener('orientationchange' in window ? 'orientationchange' : 'resize', recalc, false);\r\n        document.addEventListener('DOMContentLoaded', recalc, false);\r\n        docEle.style.display = 'block';\r\n    },\r\n    replaceStockCob: function(doc) {\r\n        doc.each(function(key, ele) {\r\n            ele.innerHTML = ele.innerHTML.replace(/([\\$|\\#])(.+?)\\((.+?)\\)[\\$|\\#]/g, function(match, type, name, id) {\r\n                //console.log(match, type, name, id);\r\n                if (type === \"#\") {\r\n                    return \"<a href='/comb/index?id=\" + id + \"' style='color:#1a7be7'>\" + name + \"</a>\";\r\n                } else if (type === \"$\") {\r\n                    return \"<a href='/stock/index?secu=\" + id + \"' style='color:#1a7be7'>\" + name + \"</a>\"; // stock\r\n                }\r\n            });\r\n        });\r\n    },\r\n    download: function(ele) {\r\n        if (Helper.isWeixin() && Helper.isAndroid()) {\r\n            alert(\"微信浏览器不支持下载\");\r\n        } else if (confirm($(ele).data(\"msg\"))) {\r\n            location.href = $(ele).data(\"url\");\r\n        }\r\n    },\r\n    //写cookie\r\n    setCookie: function(name, value, time, path) {\r\n        time = time || 86400000;\r\n        var strsec = 1000 * Number(time);\r\n        var exp = new Date();\r\n        exp.setTime(exp.getTime() + strsec * 1);\r\n        // console.log(exp.toGMTString())\r\n        path = path == \"\" ? \"\" : \";path=\" + path;\r\n        document.cookie = name + \"=\" + escape(value) + \";expires=\" + exp.toGMTString() + path;\r\n    },\r\n    //读取cookie\r\n    getCookie: function(name) {\r\n        var arr, reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\r\n        if (arr = document.cookie.match(reg))\r\n            return unescape(arr[2]);\r\n        else\r\n            return null;\r\n    },\r\n    //删除cookie\r\n    delCookie: function(name, path) {\r\n        var exp = new Date();\r\n        exp.setTime(exp.getTime() - 10000);\r\n        path = path == \"\" ? \"\" : \";path=\" + path;\r\n        document.cookie = name + \"=\" + \";expires=\" + exp.toString() + path;\r\n    }\r\n};\r\n\r\n\r\n$(function() {\r\n    $(\"body\").css(\"min-height\", ($(window).height()));\r\n});\r\n"],"sourceRoot":"/source/"}