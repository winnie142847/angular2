{"version":3,"sources":["components/iSlide/iSlider.animate.js"],"names":["global","factory","require","module","exports","define","iSlider","window","this","extend","_animateFuncs","rotate","dom","axis","scale","i","offset","direct","rotateDirect","isVertical","Math","abs","setStyle","wrap","style","visibility","zIndex","cssText","styleProp","effect","reverse","flip","depth","zoomScale","flow","absoluteOffset","directAmend","offsetRatio","card","z","toFixed","fade","opacity","zoomout","o","s","oa","lsn","clearTimeout","at","parseInt","getComputedStyle","setTimeout"],"mappings":"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","file":"components/iSlide/iSlider.animate.js","sourcesContent":["/**\r\n * More animations\r\n * @file animate.js\r\n * @author BE-FE Team\r\n *    xieyu33333 xieyu33333@gmail.com\r\n *    shinate shine.wangrs@gmail.com\r\n */\r\n\r\n(function (global, factory) {\r\n    /* CommonJS */\r\n    if (typeof require === 'function' && typeof module === 'object' && module && typeof exports === 'object' && exports)\r\n        factory(require('iSlider'));\r\n    /* AMD */\r\n    else if (typeof define === 'function' && define['amd'])\r\n        define(['iSlider'], function (iSlider) {\r\n            factory(iSlider);\r\n        });\r\n    /* Global */\r\n    else\r\n        factory(global['iSlider']);\r\n\r\n})(window ? window : this, function (iSlider) {\r\n\r\n    'use strict';\r\n\r\n    iSlider && iSlider.extend(iSlider._animateFuncs, {\r\n        // rotate\r\n        rotate: (function () {\r\n            function rotate(dom, axis, scale, i, offset, direct) {\r\n                var rotateDirect = (axis === 'X') ? 'Y' : 'X';\r\n\r\n                if (this.isVertical) {\r\n                    offset = -offset;\r\n                    if (Math.abs(direct) > 1) {\r\n                        direct = -direct;\r\n                    }\r\n                }\r\n\r\n                iSlider.setStyle(this.wrap, 'perspective', scale * 4);\r\n\r\n                dom.style.visibility = 'visible';\r\n                if (direct > 0 && i === 2) {\r\n                    dom.style.visibility = 'hidden';\r\n                }\r\n                if (direct < 0 && i === 0) {\r\n                    dom.style.visibility = 'hidden';\r\n                }\r\n                dom.style.zIndex = i === 1 ? 1 : 0;\r\n\r\n                dom.style.cssText += iSlider.styleProp('backface-visibility') + ':hidden;' + iSlider.styleProp('transform-style') + ':preserve-3d;' + 'position:absolute;';\r\n\r\n                // TODO: overflow... I dont understand why there are many differences between ios and desktop. Maybe they have different interpretations of Perspective\r\n                iSlider.setStyle(dom, 'transform', 'rotate' + rotateDirect + '(' + 90 * (offset / scale + i - 1) + 'deg) translateZ(' + (0.889 * scale / 2) + 'px) scale(0.889)');\r\n            }\r\n\r\n            rotate.effect = iSlider.styleProp('transform');\r\n            rotate.reverse = true;\r\n            return rotate;\r\n        })(),\r\n        // flip\r\n        flip: (function () {\r\n            function flip(dom, axis, scale, i, offset, direct) {\r\n                if (this.isVertical) {\r\n                    offset = -offset;\r\n                }\r\n\r\n                iSlider.setStyle(this.wrap, 'perspective', scale * 4);\r\n\r\n                dom.style.visibility = 'visible';\r\n                if (direct > 0 && i === 2) {\r\n                    dom.style.visibility = 'hidden';\r\n                }\r\n                if (direct < 0 && i === 0) {\r\n                    dom.style.visibility = 'hidden';\r\n                }\r\n\r\n                dom.style.cssText += 'position:absolute;' + iSlider.styleProp('backface-visibility') + ':hidden';\r\n                iSlider.setStyle(dom, 'transform', 'translateZ(' + (scale / 2) + 'px) rotate' + ((axis === 'X') ? 'Y' : 'X') + '(' + 180 * (offset / scale + i - 1) + 'deg) scale(0.875)');\r\n            }\r\n\r\n            flip.effect = iSlider.styleProp('transform');\r\n            flip.reverse = true;\r\n            return flip;\r\n        })(),\r\n        depth: (function () {\r\n\r\n            function depth(dom, axis, scale, i, offset, direct) {\r\n                var zoomScale = (4 - Math.abs(i - 1)) * 0.18;\r\n                // console.log(zoomScale)\r\n                iSlider.setStyle(this.wrap, 'perspective', scale * 4);\r\n                dom.style.zIndex = i === 1 ? 1 : 0;\r\n                iSlider.setStyle(dom, 'transform', 'scale(' + zoomScale + ') translateZ(0) translate' + axis + '(' + (offset + 1.25 * scale * (i - 1)) + 'px)');\r\n            }\r\n\r\n            depth.effect = iSlider.styleProp('transform');\r\n            return depth;\r\n        })(),\r\n        flow: (function () {\r\n            function flow(dom, axis, scale, i, offset, direct) {\r\n                var absoluteOffset = Math.abs(offset);\r\n                var rotateDirect = (axis === 'X') ? 'Y' : 'X';\r\n                var directAmend = (axis === 'X') ? 1 : -1;\r\n                var offsetRatio = Math.abs(offset / scale);\r\n                // console.log('d')\r\n                iSlider.setStyle(this.wrap, 'perspective', scale * 4+'rem');\r\n\r\n                if (i === 1) {\r\n                    dom.style.zIndex = scale - absoluteOffset;\r\n                }\r\n                else {\r\n                    dom.style.zIndex = (offset > 0) ? (1 - i) * absoluteOffset : (i - 1) * absoluteOffset;\r\n                }\r\n\r\n                iSlider.setStyle(dom, 'transform', 'scale(0.7, 0.7) translateZ(' + (offsetRatio * 150 - 150) * Math.abs(i - 1) + 'px)' + 'translate' + axis + '(' + (offset + scale * (i - 1)) + 'px)' + 'rotate' + rotateDirect + '(' + directAmend * (30 - offsetRatio * 30) * (1 - i) + 'deg)');\r\n            }\r\n\r\n            flow.effect = iSlider.styleProp('transform');\r\n            return flow;\r\n        })(),\r\n        card: (function () {\r\n            function card(dom, axis, scale, i, offset, direct) {\r\n                var absoluteOffset = Math.abs(offset);\r\n                var zoomScale = 1;\r\n                var z = 1;\r\n\r\n                if (absoluteOffset > 0) {\r\n                    if (i === 1) {\r\n                        zoomScale = 1 - 0.2 * Math.abs(i - 1) - Math.abs(0.2 * offset / scale).toFixed(6);\r\n                        z = 0;\r\n                    }\r\n                } else {\r\n                    if (i !== 1) {\r\n                        if ((direct > 0 && i === 0) || (direct < 0 && i === 2)) {\r\n                            zoomScale = 1 - 0.2 * Math.abs(i - 1);\r\n                        }\r\n                        z = 0;\r\n                    }\r\n                }\r\n                dom.style.zIndex = z;\r\n                iSlider.setStyle(dom, 'transform', 'scale(' + zoomScale + ') translateZ(0) translate' + axis + '(' + ((1 + Math.abs(i - 1) * 0.2) * offset + scale * (i - 1)) + 'px)');\r\n            }\r\n\r\n            card.effect = iSlider.styleProp('transform');\r\n            return card;\r\n        })(),\r\n        fade: (function () {\r\n            function fade(dom, axis, scale, i, offset, direct) {\r\n                dom.style.zIndex = i === 1 ? 1 : 0;\r\n                offset = Math.abs(offset);\r\n                if (i === 1) {\r\n                    dom.style.opacity = 1 - (offset / scale);\r\n                } else {\r\n                    dom.style.opacity = offset / scale;\r\n                }\r\n            }\r\n\r\n            fade.effect = 'opacity';\r\n            return fade;\r\n        })(),\r\n        zoomout: (function () {\r\n            var lsn;\r\n\r\n            function zoomout(dom, axis, scale, i, offset) {\r\n                var z, o, s;\r\n\r\n                var oa = offset / scale;\r\n                switch (i) {\r\n                    case 0:\r\n                        lsn && window.clearTimeout(lsn);\r\n                        o = oa < 1 ? oa : 1;\r\n                        s = 2 - (0.5 * oa);\r\n                        z = 2;\r\n                        var at = parseInt(window.getComputedStyle(dom)[iSlider.styleProp('transitionDuration', 1)]) * 1000;\r\n                        if (at > 0) {\r\n                            lsn = window.setTimeout(function () {\r\n                                dom.style.zIndex = 0;\r\n                            }, at);\r\n                        }\r\n                        break;\r\n                    case 1:\r\n                        o = 1 - oa;\r\n                        s = 1 - (0.5 * oa);\r\n                        z = 1;\r\n                        break;\r\n                    case 2:\r\n                        o = oa > 0 ? oa : 0;\r\n                        s = 0.5 - (0.5 * oa);\r\n                        z = 0;\r\n                        break;\r\n                }\r\n                dom.style.cssText += 'z-index:' + z + ';opacity:' + o + ';' + iSlider.styleProp('transform') + ':scale(' + s + ');';\r\n            }\r\n\r\n            zoomout.reverse = true;\r\n            return zoomout;\r\n        })()\r\n    });\r\n});"],"sourceRoot":"/source/"}