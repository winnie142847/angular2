{"version":3,"sources":["fund/index.js"],"names":["Helper","getRem","$","setCookie","token_exp","Core","fundCore","getQuery","fundIndex","this","$upbord","$upconcept","$dc","document","getBanner","Ajax","fundurl","banner","data","result","message","empty","i","length","href","url","appendTo","opt","slideCell","titCell","mainCell","effect","autoPlay","autoPage","switchLoad","extend","TouchSlide","weekly","_this","type","offset","limit","trigger","el","tp","getNews","newsfetch","getChg","parseFloat","e","console","log","filterChg","obj","value","percent","color","class","toFixed","getRealindex","argument","$ctn","realtime","map","index","inc","chg","find","eq","text","addClass","html","getRecommend","recoms","_data_txt","hid","arr","brr","moment","Date","diff","dt","format","chgObj","Fcode","fcode","split","cat","fname","invtyp","posi","t","css","drawSpie","on","code","jumptopage","_from","append","push","more","slideToggle","bind","bindEvent","ctn","lg","fund","siblings","name","iblock","datetime","title","id","delegate","event","uid","userid","slider","manager","list","_obj","content","num","dom","createDocumentFragment","org","grade","parseInt","pid","stopPropagation","iSlider","getElementById","isLooping","isOverspread","isAutoplay","duration","isTouchable","animateTime","fillSeam","fixPage","animateType","init","fadeIn"],"mappings":"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","file":"fund/index.js","sourcesContent":["Helper.getRem('30', '750');\r\n$(function() {\r\n    Helper.setCookie('ques', 'off', token_exp, '/');\r\n    var Core = new fundCore({ getQuery: true });\r\n    var fundIndex = function() {\r\n        this.$upbord = $('.js-bord_ctn'); //领涨板块\r\n        this.$upconcept = $('.js-index_ctn'); //领涨概念\r\n        this.$dc = $(document);\r\n        this.getBanner = function() {\r\n            // result[i].url\r\n            Core.Ajax(Core.fundurl.banner, \"GET\", null, function(data) {\r\n                var result = data.message.result;\r\n                $('.fundindex_bannerbd ul').empty();\r\n                for (var i = 0; i < result.length; i++) {\r\n                    $('<li><a href=\"' + result[i].href + '\"> \\\r\n                            <img _src=\"' + result[i].url + '\" src=\"static/fund/images/blank.png\" /> \\\r\n                            </a></li>').appendTo('.fundindex_bannerbd ul')\r\n                }\r\n                var opt = {\r\n                    slideCell: \"#focus\",\r\n                    titCell: \".fundindex_bannerhd ul\", //开启自动分页 autoPage:true ，此时设置 titCell 为导航元素包裹层\r\n                    mainCell: \".fundindex_bannerbd ul\",\r\n                    effect: \"leftLoop\",\r\n                    autoPlay: true, //自动播放\r\n                    autoPage: true, //自动分页\r\n                    switchLoad: \"_src\" //切换加载，真实图片路径为\"_src\" \r\n                }\r\n                $.extend(opt, {\r\n                    autoPlay: (result.length > 1 ? true : false)\r\n                });\r\n                TouchSlide(opt);\r\n            }, false);\r\n        }\r\n        this.weekly = function() {\r\n            var _this = this;\r\n            Core.Ajax(Core.fundurl.weekly, \"GET\", { type: 1, offset: 0, limit: 3 }, function(data) {\r\n                _this.$dc.trigger('addData', { data: data.message.result, el: _this.$upconcept, tp: 1 });\r\n            }, false);\r\n            Core.Ajax(Core.fundurl.weekly, \"GET\", { type: 0, offset: 0, limit: 3 }, function(data) {\r\n                _this.$dc.trigger('addData', { data: data.message.result, el: _this.$upbord, tp: 0 });\r\n            }, false);\r\n        };\r\n        this.getNews = function() {\r\n            var _this = this;\r\n            Core.Ajax(Core.fundurl.newsfetch, \"GET\", { offset: 0, limit: 4 }, function(data) {\r\n                _this.$dc.trigger('addNews', { data: data.message });\r\n            }, false);\r\n        };\r\n        this.getChg = function(data) {\r\n            try {\r\n                data = parseFloat(data)\r\n                if (data >= 0) {\r\n                    return [data + \"%\", \"_up\"];\r\n                } else if (data < 0) {\r\n                    return [data + \"%\", \"_down\"];\r\n                } else {\r\n                    return ['--', null];\r\n                }\r\n            } catch (e) {\r\n                console.log(e);\r\n                return ['--', null];\r\n            }\r\n        }\r\n        this.filterChg = function(data) {\r\n            var obj = {\r\n                value: '',\r\n                percent: '',\r\n                color: '',\r\n                class: ''\r\n            };\r\n            data = parseFloat(data).toFixed(2);\r\n            if (data > 0) {\r\n                obj.value = \"+\" + data + \"%\";\r\n                obj.color = '#f24957';\r\n                obj.class = '_up';\r\n                if (data >= 10) {\r\n                    obj.percent = 100;\r\n                } else {\r\n                    obj.percent = parseFloat(data / 10 * 100).toFixed(2) * 1;\r\n                }\r\n            } else if (data < 0) {\r\n                obj.value = data + \"%\";\r\n                obj.color = '#1fbf62';\r\n                obj.class = '_down';\r\n                if (data <= -10) {\r\n                    obj.percent = 100;\r\n                } else {\r\n                    obj.percent = -parseFloat(data / 10 * 100).toFixed(2) * 1;\r\n                }\r\n            } else {\r\n                obj.percent = data * 1;\r\n                obj.class = '_none';\r\n                obj.value = data + \"%\";\r\n                obj.color = '#b2b2c5';\r\n            }\r\n            return obj;\r\n        }\r\n        this.getRealindex = function(argument) {\r\n            var $ctn = $('.js-fundindex_indexdata');\r\n            Core.Ajax(Core.fundurl.realtime, \"GET\", null, function(data) {\r\n                data.message.map(function(el, index) {\r\n                    var inc = (el.inc > 0 ? '+' : '') + el.inc + '&nbsp' + (el.inc > 0 ? '+' : '') + el.chg + \"%\";\r\n                    $ctn.find('.js-index_num').eq(index).text(el.index).addClass(el.inc > 0 ? '_up' : '_down');\r\n                    $ctn.find('.js-index_state').eq(index).html(inc).addClass(el.inc > 0 ? '_up' : '_down');\r\n                })\r\n            }, false,false,false);\r\n        }\r\n        this.getRecommend = function() {\r\n            var _this = this;\r\n            Core.Ajax(Core.fundurl.recoms, \"GET\", null, function(data) {\r\n                var result = data.message.result.recoms;\r\n                $('.fundindex_list').empty();\r\n                var hid = $('<div class=\"fnlist_hidden\"></div>');\r\n                var _data_txt;\r\n                var arr = [],\r\n                    brr = [];\r\n                moment(new Date()).diff(moment(result[0].dt), 'days') == 0 ? _data_txt = '今日推荐' : _data_txt = '';\r\n                if(_data_txt){\r\n                    $('<div class=\"fundindex_listtitle\">' +'<span>'+ _data_txt +'</span>'+ '&nbsp;&nbsp;' + moment(result[0].dt).format(\"M月D日\") + '</div>').appendTo('.fundindex_tag');\r\n                }else{\r\n                    $('<div class=\"fundindex_listtitle\">' + _data_txt + '&nbsp;&nbsp;' + moment(result[0].dt).format(\"M月D日\") + '</div>').appendTo('.fundindex_tag');\r\n                }\r\n                result.map(function(el, i) {\r\n                    // #1fbf62 绿色\r\n                    // #b2b2c5 灰色\r\n                    // #f24957 红色\r\n                    var chgObj = _this.filterChg(el.chg);\r\n                    // console.log(chgObj)\r\n                    el.Fcode = el.fcode.split('_')[0];\r\n                    if (el.cat === \"股价\") {\r\n                        el.type = 'price';\r\n                    } else if (el.cat === \"新闻\") {\r\n                        el.type = 'news';\r\n                    } else if (el.cat === \"指标\") {\r\n                        el.type = 'index';\r\n                    }\r\n                    if (i >= 4) {\r\n                        brr[i] = $('<div class=\"fundindex_data\" > \\\r\n                            <div class=\"data_forward\"><div class=\"data_forward_up\"><span class=\"data_fname\">' + el.fname + '</span> \\\r\n                            <span class=\"data_invtyp\">' + el.invtyp + '</span><span class=\"data_fcode\">' + el.Fcode + '</span></div><div class=\"data_forward_down\"> \\\r\n                            <span class=\"data_cat\">' + el.cat + '</span>' + (el.posi != null ? '<span class=\"' + (el.posi == \"利好\" ? 'data_situp' : 'data_sitdown') + '\">' + el.posi + '</span>' : '') + '<span class=\"data_t\">' + el.t + '</span></div></div> \\\r\n                            <div class=\"data_backward\"><div class=\"overlay\"><div class=\"data_up\">日涨幅</div><div class=\"data_num ' + chgObj.class + ' num_en\">' + chgObj.value + '</div></div></div> \\\r\n                        </div>');\r\n                        brr[i].find('.data_backward').css('background-image', drawSpie(chgObj.percent, chgObj.color, '#dddde6'));\r\n                        brr[i].on(\"click\", {\r\n                            type: el.type,\r\n                            code: el.fcode,\r\n                            dt: el.dt\r\n                        }, function(e) {\r\n                            jumptopage(\"static/fund/fundsuportdetail.html?type=\" + e.data.type + \"&from=\" + _from + \"&fcode=\" + e.data.code + \"&dt=\" + e.data.dt);\r\n                        })\r\n                    } else {\r\n                        arr[i] = $('<div class=\"fundindex_data\" > \\\r\n                            <div class=\"data_forward\"><div class=\"data_forward_up\"><span class=\"data_fname\">' + el.fname + '</span> \\\r\n                            <span class=\"data_invtyp\">' + el.invtyp + '</span><span class=\"data_fcode\">' + el.Fcode + '</span></div><div class=\"data_forward_down\"> \\\r\n                            <span class=\"data_cat\">' + el.cat + '</span>' + (el.posi != null ? '<span class=\"' + (el.posi == \"利好\" ? 'data_situp' : 'data_sitdown') + '\">' + el.posi + '</span>' : '') + '<span class=\"data_t\">' + el.t + '</span></div></div> \\\r\n                            <div class=\"data_backward\"><div class=\"overlay\"><div class=\"data_up\">日涨幅</div><div class=\"data_num ' + chgObj.class + ' num_en\">' + chgObj.value + '</div></div></div> \\\r\n                        </div>');\r\n                        arr[i].find('.data_backward').css('background-image', drawSpie(chgObj.percent, chgObj.color, '#dddde6'));\r\n                        arr[i].on('click', {\r\n                            type: el.type,\r\n                            code: el.fcode,\r\n                            dt: el.dt\r\n                        }, function(e) {\r\n                            jumptopage(\"static/fund/fundsuportdetail.html?type=\" + e.data.type + \"&from=\" + _from + \"&fcode=\" + e.data.code + \"&dt=\" + e.data.dt);\r\n                        })\r\n                    }\r\n                })\r\n                hid.append(brr);\r\n                arr.push(hid);\r\n                if (result.length > 4) {\r\n                    var more = $('<div class=\"fundindex_more\">查看更多</div>');\r\n                    more.on('click', function() {\r\n                        var _this = this;\r\n                        hid.slideToggle('400', function() {\r\n                            $(_this).html() === '查看更多' ? $(_this).html('收起') : $(_this).html('查看更多');\r\n                        })\r\n                    });\r\n                    arr.push(more);\r\n                }\r\n                $('.fundindex_list').append(arr);\r\n            }.bind(this), false);\r\n        }\r\n        this.bindEvent = function() {\r\n            var _this = this;\r\n            this.$dc.on('addData', function(e, dt) { //概念涨幅\r\n                var data = dt.data,\r\n                    arr = [],\r\n                    ctn = dt.el,\r\n                    lg = data.fund.length - 1,\r\n                    tp = dt.tp;\r\n                if (tp) {\r\n                    ctn.siblings('.bordtitle_y').find('.js-bordname').text(data.name)\r\n                    ctn.siblings('.bordtitle_y').find('.js-bord_num').text(data.chg == null ? '--' : _this.filterChg(data.chg).value);\r\n                    ctn.siblings('.bordtitle_y').on('click', function(e) {\r\n                        jumptopage('/static/fund/fundtype.html?mdcode=' + data.code + '&md=concept');\r\n                    });\r\n                    ctn.siblings('.fundindex_title').on('click', function(e) {\r\n                        jumptopage(\"static/fund/fundledcapte.html?type=\" + $(this).data('type') + \"&from=\" + _from);\r\n                    });\r\n                } else {\r\n                    ctn.siblings('.bordtitle').find('.js-bordname').text(data.name);\r\n                    ctn.siblings('.bordtitle').find('.js-bord_num').text(data.chg == null ? '--' :_this.filterChg(data.chg).value);\r\n                    ctn.siblings('.bordtitle').on('click', function(e) {\r\n                        jumptopage('/static/fund/fundtype.html?mdcode=' + data.code + '&md=module');\r\n                    });\r\n                    ctn.siblings('.fundindex_title').on('click', function(e) {\r\n                        jumptopage(\"static/fund/fundledmodule.html?type=\" + $(this).data('type') + \"&from=\" + _from);\r\n                    });\r\n                }\r\n                data.fund.map(function(el, i) {\r\n                    chg = _this.filterChg(el.chg),\r\n                        el.code = el.fcode.split(\"_\")[0],\r\n                        iblock = (i === lg ? '<i class=\"bdicon_last\"></i>' : '');\r\n                    arr[i] = $('<li class=\"bord_data\"><i class=\"' + (!tp ? \"bord_icon\" : \"index_icon\") + '\">' + iblock + '</i><div class=\"bord_dt\"><div><span class=\"bd_dtname\">' + el.name + '</span></br><span class=\"bd_dtcode\">' + el.code + '</span></div><span class=\"bd_dtpercent ' + chg.class + '\">' + chg.value + '</span></div></li>');\r\n                    arr[i].on('click', { code: el.fcode }, function(e) {\r\n                        if (el.invtyp === \"货币型\" || el.invtyp === \"理财型\") {\r\n                            jumptopage(\"/static/fund/fund_details.html?fcode=\" + e.data.code);\r\n                        } else {\r\n                            jumptopage(\"/static/fund/funddetail.html?fcode=\" + e.data.code);\r\n                        }\r\n                    })\r\n                });\r\n                ctn.empty().append(arr);\r\n            });\r\n            this.$dc.on('addNews', function(e, dt) {\r\n                //debug\r\n                if(false){\r\n                   dt.data.result =[\r\n                    {\"id\":\"57833282e4b075ae680997c6\",\"title\":\"定增项目频“夭折” 公募参与热情不减\",\"dt\":\"2016-07-11 13:36\",\"source\":\"\",\"type\":null}\r\n                    ]\r\n                }\r\n                var data = dt.data.result,\r\n                    arr = [],\r\n                    ctn = $('.js-info_ctn');\r\n                ctn.siblings('.fundindex_title').on('click', function() {\r\n                    jumptopage(\"static/info/index.html?from=\" + _from);\r\n                })\r\n                data.map(function(el, i) {\r\n                    var datetime = moment(el.dt).format('MM-DD HH:mm');\r\n                    arr[i] = $('<li class=\"info_data\"><span class=\"info_title\">' + el.title + '</span><span class=\"info_dt\">' + datetime + '</span></li>');\r\n                    arr[i].on('click', { id: el.id }, function(e) {\r\n                        jumptopage(\"/static/info/infodetail.html?id=\" + e.data.id + \"&from=\" + _from);\r\n                    })\r\n                });\r\n                ctn.empty().append(arr);\r\n            });\r\n            this.$dc.delegate('.js-lead', 'click', function(e) {\r\n                jumptopage(\"static/fund/fundledmodule.html?type=\" + $(this).data('type') + \"&from=\" + _from);\r\n            }).delegate('.js-concept', 'click', function(event) {\r\n                jumptopage(\"static/fund/fundledcapte.html?type=\" + $(this).data('type') + \"&from=\" + _from);\r\n            });\r\n            $('.fund_fund').on('click', function() {\r\n                jumptopage(\"static/fund/chosefund.html?from=\" + _from)\r\n            })\r\n            $('.fund_devers').on('click', function() {\r\n                jumptopage(\"view/fund/fundvaluation.html?from=\" + _from + \"&type=estimate\")\r\n            })\r\n            $('.fund_rank').on('click', function() {\r\n                jumptopage(\"../view/fund/rankinglist.html?from=\" + _from + \"&type=rankings\")\r\n            })\r\n            $('.fund_company').on('click', function() {\r\n                jumptopage(\"../view/company/index.html?from=\" + _from + \"&type=rankings\")\r\n            })\r\n            $('.js-manager_more').on('click', function() {\r\n                jumptopage(\"../view/company/manager_ranking.html?from=\" + _from)\r\n            })\r\n            $('.fundidnex_search').on('click', function() {\r\n                jumptopage(\"../view/search/index.html?uid=\" + uid + \"&userid=\" + userid + \"&from=\" + _from);\r\n            })\r\n        }\r\n        this.slider = function(argument) {\r\n            var _this = this;\r\n            Core.Ajax(Core.fundurl.manager, \"GET\", null, function(data) {\r\n                var list = [];\r\n                data.message.result.map(function(el, i) {\r\n                    var _obj = _this.filterChg(el.chg);\r\n                    list.push({\r\n                        content: (function(num) {\r\n                            var frag = document.createDocumentFragment();\r\n                            var dom = $('<div class=\"fundmanager_card\"><div class=\"mag_head\"></div><span class=\"mag_name\">' + el.name + '</span> \\\r\n                            <span class=\"mag_cmp\">' + el.org + '</span> \\\r\n                            <div class=\"mag_star js-mag_star\"></div> \\\r\n                            <span class=\"mag_fullcmp\">' + el.fname + '</span> \\\r\n                            <span class=\"mag_back\">任期回报</span> \\\r\n                            <span class=\"mag_percent ' + _obj.class + '\">' + _obj.value + '</span> \\\r\n                            </div>');\r\n                            el.grade = parseInt(el.grade);\r\n                            var brr = [];\r\n                            for (var i = 0; i < el.grade; i++) {\r\n                                brr[i] = '<i class=\"stars\"></i>';\r\n                            }\r\n                            dom.find('.js-mag_star').append(brr);\r\n                            dom.on('click', { pid: el.pid },\r\n                                function(e) {\r\n                                    e.stopPropagation();\r\n                                    jumptopage(\"/static/company/man_details.html?pid=\" + e.data.pid + \"&from=\" + _from)\r\n                                })\r\n                            return dom[0];\r\n                        })(i)\r\n                    })\r\n                })\r\n                var S = new iSlider(document.getElementById('slider'), list, {\r\n                    isLooping: 1,\r\n                    isOverspread: 1,\r\n                    isAutoplay: 1,\r\n                    duration: 2000,\r\n                    isTouchable: true,\r\n                    animateTime: 500,\r\n                    fillSeam: 1,\r\n                    fixPage: 0,\r\n                    animateType: 'depth'\r\n                })\r\n            }, false);\r\n        }\r\n        this.init = function() {\r\n            this.bindEvent();\r\n            this.getBanner();\r\n            this.getRecommend();\r\n            this.getRealindex();\r\n            this.weekly();\r\n            this.getNews();\r\n            $(\"body\").fadeIn();\r\n            this.slider();\r\n        }\r\n        this.init();\r\n    }\r\n    new fundIndex();\r\n\r\n    // Core.Ajax(Core.fundurl.dividend, \"GET\", { fcode: 519011 }, function(data) {\r\n    //     console.log(data);\r\n    // }, false);\r\n})\r\n"],"sourceRoot":"/source/"}