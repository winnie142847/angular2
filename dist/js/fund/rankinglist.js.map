{"version":3,"sources":["fund/rankinglist.js"],"names":["Helper","getRem","Core","fundCore","$","rank","this","$info","type","getQuery","typeUrl","fundurl","rankings","estimate","initDom","_this","css","top","on","parent","fadeOut","getCookie","hide","setCookie","setTimeout","initdata","changSortkey","_key","_type","Data","offset","sortkey","nature","invtyp","typ","csftyp","Ajax","urls","data","getType","total","message","contain","trigger","isroll","refresh","transformOption","minScrollY","document","getElementById","style","cssText","changIsState","pullDownAction","_myScroll","disable","enable","text","show","pullUpAction","no_data_text","isroll2","sort","limit","blockClass","_num","_active","arr","Datas","label","value","result","each","index","el","append","width","iScroll","hScrollbar","vScrollbar","checkDOMChanges","position","delegate","e","code","$custfund","$sortspan","$sort","$custfundup","scrollToElement","querySelector","addClass","siblings","removeClass","stopPropagation","children","length","empty","templte","Array","val","classs","present","vchg","chg","toFixed","dt","split","join","name","fname","fcode","vnet","net","jumptopage","initIscroll","addEventListener","preventDefault","fadeIn","click","hasClass","attr","background-position","init","xx"],"mappings":"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","file":"fund/rankinglist.js","sourcesContent":["Helper.getRem('30', '750');\r\nvar Core = new fundCore(); //基金核心库\r\n$(function() {\r\n    var rank = function() {\r\n        this.$info = $('.js-tip_info');\r\n        this.type = Helper.getQuery('type'); //类型/估值 净值\r\n        this.typeUrl = function() {\r\n            if (this.type === 'rankings') {\r\n                return Core.fundurl.rankings;\r\n            } else if (this.type === 'estimate') {\r\n                return Core.fundurl.estimate;\r\n            } else {\r\n                throw ('错误类型')\r\n            }\r\n        };\r\n        this.initDom = function() {\r\n            var _this = this;\r\n            if (this.type === 'estimate') {\r\n                $('.custfund_head').css({ 'top': '5.4rem' });\r\n                $(\"#wrapper\").css({ 'top': '8rem' });\r\n                $('.js-tip_info i').on('click', function() {\r\n                    $(this).parent().fadeOut('normal', function() {\r\n                        $('.custfund_head').css({ 'top': '3rem' });\r\n                        $(\"#wrapper\").css({ 'top': '6rem' });\r\n                    });\r\n                })\r\n                if (Helper.getCookie('info')) {\r\n                    this.$info.hide();\r\n                    $('.custfund_head').css({ 'top': '3rem' });\r\n                    $(\"#wrapper\").css({ 'top': '6rem' });\r\n                } else {\r\n                    Helper.setCookie('info', 'true', 60 * 60 * 24);\r\n                    setTimeout(function() {\r\n                        _this.$info.fadeOut('normal', function() {\r\n                            $('.custfund_head').css({ 'top': '3rem' });\r\n                            $(\"#wrapper\").css({ 'top': '6rem' });\r\n                        });\r\n                    }, 6000);\r\n                }\r\n            }\r\n        }\r\n        this.initdata = function() {\r\n            var _this = this;\r\n            var urls = this.typeUrl();\r\n            var contain = $('#thelist'); //父层容器\r\n            var icon = $('.js-fd_icon'); //\r\n            var Data = {\r\n                sort: '1',\r\n                offset: 0,\r\n                limit: 20,\r\n                sortkey:'d',\r\n                invtyp: '股票型',\r\n                nature: null,\r\n                typ: null,\r\n                csftyp: 'GPX'\r\n            };\r\n            var total;\r\n            var isroll, isroll2;\r\n            var blockClass = (_this.type === 'estimate' ? 'fund_blocks' : 'fund_block'),\r\n                _num = (_this.type === 'estimate' ? 6 : 5),\r\n                _active = (_this.type === 'estimate' ? 'fund_headactives' : 'fund_headactive');\r\n            Core.Ajax(Core.fundurl.invtyp, \"GET\", Data, function(data) {\r\n                var arr = [];\r\n                if (_this.type === 'estimate') {\r\n                    Datas = [{ label: '股票型', value: '股票型' }, { label: '混合型', value: '混合型' }, { label: '联接基金', value: '基金型' }, { label: 'ETF', value: 'ETF' }, { label: '分级基金A', value: '分级基金A' }, { label: '分级基金B', value: '分级基金B' }]\r\n                } else {\r\n                    Datas = data.message.result;\r\n                }\r\n                $(Datas).each(function(index, el) {\r\n                    arr[index] = $('<div class=\"' + blockClass + ' ' + (el.label === '股票型' ? _active : '') + '\"  data-index=' + (index + 1) + ' data-code=\"' + el.value + '\">' + el.label + '</div>');\r\n                });\r\n                $('.fund_head').append(arr).css({\r\n                    \"width\": ((Datas.length) * _num) + 'rem'\r\n                });\r\n                isroll2 = new iScroll('type', {\r\n                    hScrollbar: true,\r\n                    vScrollbar: false,\r\n                    checkDOMChanges: true,\r\n                });\r\n                setTimeout(function() {\r\n                        $('.type_ctn').css({ position: 'fixed' });\r\n                    }, 2000)\r\n                    // ;\r\n            }, true, false, true);\r\n            $('.fund_head').delegate(' div', 'click', function(e) {\r\n                var index = ($(this).data('index') - 1),\r\n                    code = $(this).data('code'),\r\n                    text = $(this).text(),\r\n                    $custfund = $('.js-custfund_value'),\r\n                    $sortspan = $('.js-sort_span'),\r\n                    $sort = $('.js-sort'),\r\n                    $custfundup = $('.js-sort_span');\r\n                isroll2.scrollToElement(document.querySelector('.fund_head div:nth-child(' + (index <= 1 ? 1 : index - 1) + ')'), null, null, true);\r\n                $(this).addClass(_active).siblings().removeClass(_active);\r\n                if (text === \"货币型\" || text === \"理财型\") {\r\n                    $custfund.text('万份收益');\r\n                    $sortspan.text('七日年化');\r\n                    $sort.hide();\r\n                    $custfundup.show().on('click', function(e) {\r\n                        e.stopPropagation();\r\n                    });\r\n                } else {\r\n                    $custfund.text('单位净值')\r\n                    $sort.show();\r\n                    $custfundup.hide();\r\n                }\r\n                changSortkey(code);\r\n            });\r\n            contain.on(\"addData\", function(e, data) {\r\n                if (contain.children().length > 0 && data.getType !== \"add\") {\r\n                    contain.empty();\r\n                }\r\n                var templte = new Array();\r\n                //debug\r\n                if(false){\r\n                    data.message.result[0].chg = 0;\r\n                    data.message.result[0].vchg = 0;\r\n                    //console.log(data.message.result[0].vchg)\r\n                }\r\n                $(data.message.result).each(function(index, el) {\r\n                    var present = (_this.type === 'estimate' ? el.vchg : el.chg);\r\n                    var val, classs;\r\n                    if (present === \"--\") {\r\n                        val = present;\r\n                        classs = \"\";\r\n                    } else if (present > 0) {\r\n                        val = \"+\" + present.toFixed(2) + \"%\";\r\n                        classs = \"_up\";\r\n                    } else if (present.toFixed(2) == 0) {\r\n                        //val = present + \"%\";\r\n                        val = \"0.00%\";\r\n                        classs = \"_none\";\r\n                    } else {\r\n                        val = present.toFixed(2) + \"%\";\r\n                        classs = \"_down\";\r\n                    }\r\n                    if (el.dt) {\r\n                        var arr = el.dt.split('-');\r\n                        el.dt = [arr[1], arr[2]].join('-');\r\n                    }\r\n                    templte[index] = $(\"<li class='fund_data'> \\\r\n                                <div class='fund_fi'><span class='fund_fname'>\" + (el.name || el.fname) + \"</span> \\\r\n                                <span class = 'fund_fcode'> \" + (el.code || el.fcode).split('_')[0] + \"</span> \\\r\n                                </div> \\\r\n                                <div class = 'fund_se'> <span class = 'fund_net'> \" + (el.vnet || el.net).toFixed(4) + \"</span> \\\r\n                                <span class='fund_dt'>\" + el.dt + \"</span > </div> \\\r\n                                <div class = 'fund_chg \" + classs + \" js-present'> \\\r\n                                \" + val + \" </div> </li>\");\r\n                    templte[index].on('click', {\r\n                        code: (el.code || el.fcode)\r\n                    }, function(e) {\r\n                        if (el.invtyp === \"货币型\" || el.invtyp === \"理财型\") {\r\n                            jumptopage(\"/static/fund/fund_details.html?fcode=\" + e.data.code);\r\n                        } else {\r\n                            jumptopage(\"/static/fund/funddetail.html?fcode=\" + e.data.code);\r\n                        }\r\n                    })\r\n                });\r\n                contain.append(templte);\r\n            })\r\n            Core.Ajax(urls, \"GET\", Data, function(data) {\r\n                data.getType = \"refresh\";\r\n                Data.offset = data.message.offset;\r\n                total = data.message.total;\r\n                Data.sortkey = \"d\";\r\n                contain.trigger('addData', data);\r\n                setTimeout(function() {\r\n                    isroll = Core.initIscroll('wrapper', 'pullDown', 'pullUp', pullDownAction, pullUpAction);\r\n                    Core.changIsState(isroll, data);\r\n                    _this.initDom()\r\n                }, 10);\r\n                document.addEventListener('touchmove', function(e) {\r\n                    e.preventDefault();\r\n                }, false);\r\n                $(\"body\").fadeIn();\r\n            }, true, false, true)\r\n            $(\".custfund_up\").click(function(e) {\r\n                if ($(\".sort_span\").hasClass('sort_on')) {\r\n                    $(\".sort_span\").removeClass('sort_on');\r\n                    $(\".sort_div\").hide().children('i').show();\r\n                } else {\r\n                    $(\".sort_span\").addClass('sort_on');\r\n                    $(\".sort_div\").show().children(\"i[type='\" + $(\".sort_span\").attr('type') + \"']\").hide();\r\n                }\r\n                e.stopPropagation();\r\n            })\r\n            $(\".sort_div i\").click(function() {\r\n                $(\".sort_span\").attr('type', $(this).attr('type')).text($(this).text());\r\n                $(\".sort_span\").append('<i class=\"arrow\"></i>');\r\n                if ($(this).attr('type') === \"cy\") {\r\n                    $('.sort_span').css({\r\n                        \"background-position\": \"6.2rem\"\r\n                    })\r\n                } else {\r\n                    $('.sort_span').css({\r\n                        \"background-position\": \"5.8rem\"\r\n                    })\r\n                }\r\n                changSortkey($(this).attr('type'), 'sortkey');\r\n            })\r\n\r\n\r\n\r\n            function changSortkey(_key, _type) {\r\n                Data.offset = 0;\r\n                if (_type == \"sortkey\") {\r\n                    Data.sortkey = _key;\r\n                } else {\r\n                    if (_key === \"指数型\") {\r\n                        Data.nature = _key;\r\n                        Data.invtyp = null;\r\n                        Data.typ = null;\r\n                    } else if (_key === \"QDII型\") {\r\n                        Data.typ = _key;\r\n                        Data.invtyp = null;\r\n                        Data.nature = null;\r\n                    } else {\r\n                        Data.invtyp = (_key === \"all\" ? null : _key);\r\n                        Data.nature = null;\r\n                        Data.typ = null;\r\n                    }\r\n                    if (_this.type === \"rankings\") {\r\n                        Data.invtyp = null;\r\n                        Data.csftyp = _key;\r\n                    }\r\n                }\r\n                Core.Ajax(urls, \"GET\", Data, function(data) {\r\n                    data.getType = \"refresh\";\r\n                    data.sortkey = _key;\r\n                    total = data.message.total;\r\n                    contain.trigger('addData', data);\r\n                    isroll.refresh();\r\n\r\n                    //修复净值排行基金类型tab 切换时 isScroll 组件bug（5s以上使用-webkit-transform）;\r\n                    var transformOption = 'translate(0px,'+isroll.minScrollY+'px) scale(1) translateZ(0px)';\r\n                    document.getElementById('scroller').style.cssText=\"transition-duration: 200ms;-webkit-transform:\"+transformOption;\r\n                    //\r\n                    Core.changIsState(isroll, data);\r\n                }, true, false, true)\r\n            }\r\n\r\n            function pullDownAction(_myScroll) {\r\n                _myScroll.disable();\r\n                Data.offset = 0;\r\n                Core.Ajax(urls, \"GET\", Data, function(data) {\r\n                    data.getType = \"refresh\";\r\n                    Data.offset = data.message.offset;\r\n                    total = data.message.total;\r\n                    contain.trigger('addData', data);\r\n                    _myScroll.refresh();\r\n                    _myScroll.enable();\r\n                    $('.pullUpLabel').text('上拉刷新');\r\n                    $('.pullUpIcon').show();\r\n                    Core.changIsState(_myScroll, data);\r\n                }, true, false, true)\r\n            }\r\n\r\n            function pullUpAction(_myScroll) {\r\n                _myScroll.disable();\r\n                Data.offset += 20;\r\n                if (Data.offset > total) {\r\n                    $('.pullUpLabel').text(no_data_text);\r\n                    $('.pullUpIcon').hide();\r\n                    _myScroll.enable();\r\n                    return;\r\n                }\r\n                Core.Ajax(urls, \"GET\", Data, function(data) {\r\n                    data.getType = \"add\";\r\n                    offset = data.message.offset;\r\n                    total = data.message.total;\r\n                    contain.trigger('addData', data);\r\n                    _myScroll.refresh();\r\n                    _myScroll.enable();\r\n                    Core.changIsState(_myScroll, data);\r\n                }, true, false, true)\r\n            }\r\n        }\r\n        this.init = function() {\r\n            this.initdata();\r\n        }\r\n        this.init();\r\n    }\r\n    new rank();\r\n    xx\r\n    // $('body').fadeIn('slow');\r\n})\r\n"],"sourceRoot":"/source/"}